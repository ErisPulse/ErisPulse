# 项目贡献指南

## 分支管理规范

### 分支结构
- **main**: 主分支，存放稳定可发布的代码
- **Develop/v2**: 开发主分支，所有功能分支最终合并至此
- **Pre-Release/v2**: 预发布分支，用于版本发布前的测试
- **feature/***: 功能开发分支，按功能命名
- **fix/***: 问题修复分支，按问题描述命名
- **Archive/v1**: 归档分支，存放旧版本代码

## 代码注释规范

### 模块级文档注释
```python
"""
[模块名称]
[模块功能描述]

{!--< tips >!--}
重要使用说明或注意事项
{!--< /tips >!--}
"""
```

### 方法注释
#### 基本格式
```python
def func(param1: type1, param2: type2) -> return_type:
    """
    [功能描述]
    
    :param param1: [类型1] [参数描述1]
    :param param2: [类型2] [参数描述2]
    :return: [返回类型] [返回描述]
    """
    pass
```

#### 完整格式（适用于复杂方法）
```python
def complex_func(param1: type1, param2: type2 = None) -> Tuple[type1, type2]:
    """
    [功能详细描述]
    [可包含多行描述]
    
    :param param1: [类型1] [参数描述1]
    :param param2: [类型2] [可选参数描述2] (默认: None)
    
    :return: 
        type1: [返回参数1描述]
        type2: [返回参数2描述]
    
    :raises ErrorType: [错误描述]
    """
    pass
```

### 特殊标签
| 标签格式 | 作用 | 示例 |
|---------|------|------|
| `{!--< internal-use >!--}` | 标记为内部使用 | `{!--< internal-use >!--}` |
| `{!--< ignore >!--}` | 忽略此方法 | `{!--< ignore >!--}` |
| `{!--< deprecated >!--}` | 标记为过时方法 | `{!--< deprecated >!--} 请使用new_func()代替` |
| `{!--< experimental >!--}` | 标记为实验性功能 | `{!--< experimental >!--} 可能不稳定` |
| `{!--< tips >!--}...{!--< /tips >!--}` | 多行提示内容 | `{!--< tips >!--}\n重要提示内容\n{!--< /tips >!--}` |

## 贡献流程

1.  **Fork仓库**
    *   首先fork主仓库到您的个人GitHub账户。
    * 提示：在fork时，请**取消勾选** "Copy the main branch only" 选项，以确保获取完整的分支结构（包括 `Develop/v2`、`Pre-Release/v2` 等分支），这是完成贡献提交的必要条件。
    
2.  **创建功能分支**
    *   在您**自己Fork的仓库**中，基于官方的 `Develop/v2` 分支创建功能分支。
    *   分支命名规范：
        *   `feature/您的功能描述` (例如：`feature/user-auth`)
        *   `fix/问题描述` (例如：`fix/login-bug`)
    *   > **请注意**：此分支创建在您自己的仓库中，用于隔离开发。

3.  **开发工作**
    *   在您的功能分支上进行开发。
    *   保持提交信息清晰明确（例如：`feat: 添加用户登录功能`）。
    *   严格遵守上文中的代码注释规范，为所有新增的公开API添加文档注释。
    *   提交前，确保在 `CHANGELOG.md` 中添加了变更描述。
    *   为了减少合并冲突，建议定期从**官方仓库的 `Develop/v2` 分支**拉取（`pull`）更新。

4.  **提交Pull Request (PR)**
    *   开发完成后，在GitHub上向**官方仓库的 `Develop/v2` 分支**发起Pull Request。
    *   请确保PR的**目标仓库**是原始项目库，**目标分支**为 `Develop/v2`。
    *   在PR描述中，请完整填写提供的PR模板，勾选对应选项并添加必要的详情信息。

    **4.1 提交到其他分支（可选）**
    *   如果您需要发布测试版本或进行其他特殊操作，也可以向官方仓库的**其他分支**（如 `Pre-Release/v2`）发起PR。
    *   请在PR标题和描述中**明确说明**提交至此分支的原因和目的。

5.  **代码审查**
    *   维护者将对您的PR进行代码审查。
    *   审查内容包括但不限于：代码逻辑、风格是否符合规范、注释是否完整、特殊标签使用是否正确等。

6.  **合并与发布**
    *   审查通过后，您的代码将被合并到官方的 `Develop/v2` 分支。
    *   之后的官方发布流程为：
        *   `Develop/v2` → `Pre-Release/v2` （进行集成测试）
        *   测试通过后，由维护者发布到 `main` 分支。

## 注意事项

*   **请勿**直接向官方的 `main` 或 `Pre-Release/v2` 分支提交代码或PR，所有功能开发应通过PR至 `Develop/v2` 的方式进入代码库。
*   **例外情况**：如流程第4.1条所述，为特定目的（如发布测试版本）向 `Pre-Release/v2` 等分支提交PR是允许的，但需在PR中充分说明。
*   所有公开API方法必须包含完整注释。
*   如有疑问，请联系 `support@erisdev.com` 或 云湖群ID 635409929

感谢您的贡献！
